== Clause containing normative material

=== The HY_Features conceptual model

This standard defines the HY_Features conceptual model as a standard for the identification and description of hydrologic features reflecting both hydrologic significance and topological connectivity of hydrologic features. HY_Features formalizes the fundamental relationships between components of the hydrosphere. It describes the hydrosphere as a hierarchical network of hydrologically connected catchments, their organization in networks of catchments and/or waterbodies, and their various visual and topological realizations.

Core concepts of HY_Features are: 1) an abstract idea of 'catchment' witch has many possible 'realizations', 2) upstream - downstream catchment topology and nested hierarchy, 3) aggregation of networks of watercourses within catchment networks, and 4) linear referencing along a river using a nominal main flow path. The single concept that governs HY_Features is that any place on the land surface can be thought of as the outfall of a corresponding catchment and be placed into a hydrologic topology of connected, often named, hydrologic features.

The conceptual model is implemented in several discrete modules. It is intended that implementations of the conceptual model need to consider only those parts of the model required. An implementation may include or exclude feature properties, or allow cardinality of one or more associations to be ‘nillable’. Table 1 lists the application schemas, the leaf packages included and the concepts reflected therein.

[width="90%",options="header"]
|===
|Application Schema |Concepts Reflected |Leaf package included
|HY_HydroFeature 
|fundamental properties and relationships between features governed by the physical laws of Hydrology, naming of hydrologic features, location of hydrologic feature along a line
|NamedFeature, HydroComplex, RiverPositioningSystem|
HY_SurfaceHydroFeature 
|hydrologic features on the Earth’s land surface without complexity and detail of hydrologic and hydraulic models
|ChannelNetwork, HydrographicNetwork, WaterBodyTypes, Storage|
HY_HydrometricNetwork
|hydrometric network of logically connected hydrometric features located on or along a hydrologic feature
|— -|
|===

The conceptual model is expressed in the Geographic Information Conceptual Schema Language (ISO 19103:2005) based on the Unified Modeling Language (UML). The organization into packages and package dependencies are shown in link:#figure16[Figure 16]. The following sections describe requirements classes for each application schema, whereby each feature addressed in the requirements shall be understood as an instance of the GF_FeatureType (aka FeatureType) «metaclass». For the purpose of consistency with the conceptual UML model the British spelling of feature type names and properties has been adopted.

[#figure16]
.HY_Features modules and packages
image::figures/fig16.png[]

=== The HY_Features conceptual conformance (mapping)

The HY_Features model is a 'conceptual model', not intended to be directly implementable for data exchange or persistence. The conformance target of the HY_Features model is therefore a logical model of an implementation that encodes aspects of the HY_Features model. 

Conformance to the HY_Features model is a matter of being able to unambiguously identify what elements of an implementation schema map to the HY_Features model, and inclusion of all mandatory properties of the defined Feature Types in such mappings. 

The HY_Features conceptual model provides the basis for determining whether two references to hydrologic features are references to the same feature. i.e. to specify the real world type of features independent of their implementation or format. More specifically, it provides the means to distinguish between the reference concept (e.g. a catchment) and its realizations as geographic features (e.g. flowpath, catchment area or boundary), and hence to declare that different realizations share common hydrological connectivity. 

Disparate systems describing hydrologic features may be mapped to the equivalent HY_Features definitions to disambiguate the local usage of terminology and specific implementation choices made. 

Note that a direct encoding of HY_Features to an implementation format such as RDF may be implemented through annotation or direct correspondence of names to the HY_Feature elements.

include::requirements/req01.adoc[]

An implementation schema conforming to HY_Features SHALL provide a formal mapping from one or more Feature Types present in the implementation schema to Feature Types defined in this standard specification, including all mandatory properties defined by the realized HY_Features concept. Default values to be assumed must be specified in this mapping.

=== The HY_Features data conformance (encoding)

As a conceptual model HY_Features does not specify conformance requirements regarding the structure of possible encodings. It does however specify that equivalence of feature instances can be expressed. The requirement that arises is therefore that the content of feature identification elements can be matched among implementations. This does not demand the use of identical identifiers across different implementations, but it does require that implementations provide a mechanism to match identifiers from different schemes.

include::requirements/req02.adoc[]

Implementations of HY_Features SHALL either use common identifiers for instances of Feature Types mapped to the same underlying HY_Features Feature Type, OR provide a mechanism to match identifiers from different identification schemes.

=== The Hydro Feature application schema

The Hydro Feature schema provides the core concepts of a named hydrologic feature, of a catchment and its multiple realizations, and of a river positioning using a linear referencing. Hydrologic features are identified by hydrologically significant characteristics and feature topology according to hydrologic rules. Providing a standard terminology for the typical relationships between hydrologic features allows the hydrosphere to be expressed in a consistent way across multiple data products, regardless of various spatial or temporal representations. 

Hydrologic features are usually named in cross-jurisdictional and multi-lingual contexts. The Hydro Feature schema provides a concept for a named hydrologic feature which allows the use of multiple names and identifiers without the need for a formal naming model. The named hydrologic feature is further described using various domain-specific feature types, which specify properties of the specializations to define one or more aspects of the hydrology phenomenon (link:#figure17[Figure 17]).

The Hydro Feature schema provides the core model of catchments and their multiple realizations. The catchment model denotes the hydrologic definition of a catchment by its outlet, conceptualized as HY_Outfall, and the interaction of catchments through such defined outfalls. This allows division of the hydrosphere into a logically connected network of catchments. Depending on the perspective of a particular study, the logical catchment can be realized in multiple ways by geometric or topologic features. The Hydro Feature schema provides a model to place a catchment's outfall relative to a feature which realizes the logical outfall. The river positioning model provides a river reference system which allows linear referencing of an outfall (typically a monitoring location) using the linear realization of a catchment that corresponds to another outfall (typically a confluence).

[#figure17]
.Hydrologic features describing separate aspects of the hydrology phenomenon
image::figures/fig17.png[]

The definitions applied in the Hydro Feature schema are rooted in the definitions given in the WMO Glossary of Hydrology regardless of their application context in respect to the Earth's surface. For the purpose of testing the applicability of the conceptual model in the context of surface water hydrology, the definitions in this standard refer to surface water hydrology. A conceptual model capturing the specifics of features associated with the groundwater domain is developed with reference to the OGC WaterML 2: Part 4 – GroundwaterML2 standard [6].

The Hydro Feature schema contains the leaf packages: NamedFeature, HydroComplex, and RiverPositioningSystem. link:#figure18[Figure 18] shows the external dependencies.

[#figure18]
.Hydro Feature – external dependencies
image::figures/fig18.png[]

include::requirements/req03.adoc[]

==== The Named Feature model

The Named Feature model (link:#figure19[Figure 19]) denotes the abstraction of the hydrology phenomenon as a named hydrologic feature. It provides an approach to identify a named hydrologic feature in cross-jurisdiction and multi-lingual contexts by considering the cultural, political and historical aspects of names assigned to hydrologic features in common usage. 

[#figure19]
.Named Feature (UML class diagram, https://github.com/opengeospatial/HY_Features/blob/master/req/hy_hydrofeature/namedFeature/hydrofeature[/req/hy_hydrofeature/namedFeature/hydrofeature])
image::figures/fig19.png[]

The HY_HydroFeature feature type is further specialized by separate feature types. Each specialization inherits the properties from generalization; HY_HydroFeature type has one association: _name_.

The *name* associates a name given to the hydrologic feature in cultural, political or historical context. If required, this association shall be used where names are assigned to a feature instance in cross-jurisdictional and multi-lingual contexts, that may occur with trans-boundary features. 

include::requirements/req04.adoc[]

The HY_HydroFeatureName feature type provides an abstract pattern to handle cultural, political and historical variability of names. This the assignment of a referencable name for all or part of a hydrologic feature without necessarily have a formal model for naming. HY_HydroFeatureName has five attributes: _name_, _namesPart_, _preferredBy_, _usage_ and _variantSpelling_. If required, an implementation shall use this type to describe the usage of multiple names. The usage type may be identified using the HY_NameUsage code list described in link:#anex6_4[Annex B.4].

include::requirements/req05.adoc[]



=== Template

Paragraph – intro text for the requirement class.

Use the following table for Requirements Classes.

include::requirements/requirements_class.adoc[]

==== Requirement 1
Paragraph - intro text for the requirement.

Use the following table for Requirements, number sequentially.

include::requirements/requirement.adoc[]

Dictionary tables for requirements can be added as necessary. Modify the following example as needed.

[width="90%",options="header"]
|===
|Names |Definition |Data types and values |Multiplicity and use
|name 1 |definition of name 1 |float |One or more (mandatory)
|name 2 |definition of name 2 |character string type, not empty |Zero or one (optional)
|name 3 |definition of name 3 |GML:: Point PropertyType |One (mandatory)
|===
